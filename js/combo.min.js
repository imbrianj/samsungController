/* 20200531 */

SB=function(){"use strict";return{version:20170320,isChildOf:function(e,t){if(t===e)return!1;for(;e&&e!==t&&e!==document.body;)e=e.parentNode;return e===t},event:{list:[],add:function(e,t,i,s){s=s||!1,e.addEventListener?e.addEventListener(t,i,s):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i,SB.event.list.push([e,t,i])},remove:function(e,t,i,s){s=s||!1;var o=0;for(e.removeEventListener?e.removeEventListener(t,i,s):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=null;o<SB.event.list.length;o+=1)if(SB.event.list[o]&&SB.event.list[o]&&SB.event.list[o][0]===e&&SB.event.list[o][1]===t&&SB.event.list[o][2]===i){SB.event.list.splice(o,1);break}},removeAll:function(e){e=e||document;for(var t=SB.event.list.length-1;0<=t;--t)SB.event.list[t]&&(SB.event.list[t][0]!==e&&e!==document||SB.event.remove(SB.event.list[t][0],SB.event.list[t][1],SB.event.list[t][2]))}},getTarget:function(e){return(e=e||window.event).target?e.target:e.srcElement},hasAttribute:function(e,t,i){if(e[t])return!!e[t].match(new RegExp("(\\s|^)"+i+"(\\s|$)"))},hasClass:function(e,t){var i=!1;return e&&e.className&&(i=!!SB.hasAttribute(e,"className",t)),i},addClass:function(e,t){e&&t&&(SB.hasClass(e,t)||(e.className=SB.trim(e.className+" "+t)))},removeClass:function(e,t){SB.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," "),e.className=SB.trim(e.className))},toggleClass:function(e,t){SB.hasClass(e,t)?SB.removeClass(e,t):SB.addClass(e,t)},setFocus:function(e){"function"==typeof e.setActive?e.setActive():"function"==typeof e.focus&&e.focus()},get:function(e){return document.getElementById(e)},getByTag:function(e,t){return(t=t||document).getElementsByTagName(e)},getByClass:function(e,t,i){var s=[],o=[],n=0,r=0;if(t=t||document,"*"===(i=i.toLowerCase()||"*")&&document.getElementsByClassName)return t.getElementsByClassName(e);if(t.getElementsByClassName)if(o=t.getElementsByClassName(e),i&&o.length)for(n in o)o[n].tagName&&o[n].tagName.toLowerCase()===i&&(s[r]=o[n],r+=1);else s=o;else for(n in o=SB.getByTag(i,t))SB.hasClass(o[n],e)&&(s[r]=o[n],r+=1);return s},getText:function(e){return e.textContent?e.textContent:e.innerText?e.innerText:e.text?e.text:e.innerHTML},putText:function(e,t){e.textContent?e.textContent=t:e.innerText?e.innerText=t:e.text?e.text=t:e.innerHTML=t},trim:function(e){return(e=e||"").toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")},decode:function(e){var t="";return"object"==typeof JSON&&(t=JSON.parse(e)),t},encode:function(e){var t="";return"object"==typeof JSON&&(t=JSON.stringify(e)),t},log:function(e,t,i){var s=new Date,o="color: white";if("object"==typeof console&&"function"==typeof console.log)if(t&&"object"!=typeof e){switch(e="%c"+t+"%c: "+e+" ("+s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes()+")",i){case"success":o="color: green";break;case"info":o="color: aqua";break;case"error":o="color: red"}console.log(e,"background: black; "+o,"background: black; color: white")}else console.log(e)},vibrate:function(e){e=e||20,window.navigator&&window.navigator.vibrate?window.navigator.vibrate(e):SB.log("Not supported","Vibrate","error")},notify:function(e,t,i){var s,o;return"function"==typeof Notification&&("granted"===Notification.permission?(s=new Notification(e,t),setTimeout(function(){s.close(),SB.event.remove(s,"click",o)},1e4),o=function(e){window.focus(),i(e),SB.event.remove(s,"click",o)},SB.event.add(s,"click",o)):SB.notifyAsk()),s},notifyAsk:function(){"function"==typeof Notification&&"denied"!==Notification.permission&&Notification.requestPermission(function(e){Notification.permission!==e&&(Notification.permission=e)})},sound:{sounds:{},play:function(e){"function"==typeof Audio&&(SB.sound.sounds[e]||(SB.sound.sounds[e]=new Audio(e)),SB.sound.sounds[e].play())}},speak:function(e,t,i){var s,o;window.speechSynthesis?(s=new SpeechSynthesisUtterance,o=window.speechSynthesis.getVoices(),s.text=e,s.lang=t||"en-US",o&&o[10]&&"Alex"===o[10].name&&(s.voice=o[10],"female"===i&&(s.voice=o[30])),window.speechSynthesis.speak(s)):SB.log("Not supported","Speak","error")},transcribe:function(t){var i,s,e=window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||null;return e?(SB.log("Supported","Transcribe","info"),i=new e,s=function(e){t(e.results[0][0].transcript,e.results[0][0].confidence),SB.event.remove(i,"result",s)},SB.event.add(i,"result",s)):SB.log("Not supported","Transcribe","error"),i},storage:function(e,t){var i;return e&&("undefined"!=typeof localStorage?(void 0!==t&&("object"==typeof t&&(t=SB.encode(t)),localStorage.setItem(e,t)),i=localStorage.getItem(e)):SB.log("Not supported","Local Storage","error")),i},ajax:{request:function(e){e.method=e.method||"GET",e.onStart=e.onStart||function(){},e.onComplete=e.onComplete||function(){};var t,i,s="?";if(i=function(){switch(e.onStart(),typeof e.onComplete){case"object":e.onComplete.value?e.onComplete.value=e.response:e.onComplete.childNodes[0]&&SB.putText(e.onComplete,e.response);break;case"function":e.onComplete()}},window.XMLHttpRequest)t=new XMLHttpRequest;else{if(!window.ActiveXObject)return!1;t=new ActiveXObject("Microsoft.XMLHTTP")}"GET"===e.method&&(-1===e.path.indexOf("?")&&-1===e.param.indexOf("?")||(s="&"),e.path=e.path+s+e.param,e.param=""),t.open(e.method.toUpperCase(),e.path,!0),"POST"===e.method&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("rest","true"),SB.event.add(t,"readystatechange",function(){if(4===t.readyState){if(200!==t.status)return!1;e.response=t.responseText,i()}}),t.send(e.param)}},init:function(){SB.spec&&SB.spec.init&&SB.spec.init(),SB.addClass(document.body,"rich")}}}(),document.addEventListener&&document.addEventListener("DOMContentLoaded",SB.init,!1),SB.event.add(window,"load",function(){"use strict";document.addEventListener||SB.init()}),SB.event.add(window,"unload",function(){"use strict";SB.event.removeAll()}),"object"==typeof module&&(module.exports=SB),SB.spec=function(){"use strict";return{version:20190810,state:{},parsers:{},templates:{},strings:{},socket:{},uiComponents:{header:{},body:{},indicator:{},templates:[]},ariaDevice:function(){var e=SB.getByClass("selected",SB.spec.uiComponents.header,"li")[0],t=SB.getByTag("h2",SB.spec.uiComponents.header)[0],i=SB.spec.strings.CURRENT.split("{{DEVICE}}").join(SB.getText(e));SB.putText(t,i),i=null},navChange:function(e){var t=SB.getByClass(e,SB.spec.uiComponents.header,"li")[0],i=SB.get(e),s=SB.getByClass("selected",SB.spec.uiComponents.header,"li")[0],o=SB.getByClass("selected",SB.spec.uiComponents.body,"section")[0];t&&!SB.hasClass(t,"selected")&&(SB.removeClass(s,"selected"),SB.removeClass(o,"selected"),SB.spec.lazyLoad(e),SB.storage("selected",e),SB.addClass(t,"selected"),SB.addClass(i,"selected"),SB.spec.lazyUnLoad(o),SB.spec.ariaDevice())},updateTemplate:function(e){var t,i,s,o,n,r=SB.get(e.deviceId),a=SB.spec.parsers[e.typeClass],l=e.value,p=e.state,c=document.createElement("div"),u=!1;return SB.spec.state[e.deviceId]=e,SB.log("Updated",e.deviceId,"success"),r&&(s=SB.spec.uiComponents.templates[e.deviceId].markup,i=SB.hasClass(r,"selected")?" selected":"",o=r.cloneNode(!0),(t=SB.getByTag("h2",o)[0]).parentNode.removeChild(t),n=o.innerHTML,a&&(s=a(e.deviceId,s,p,l,SB.spec.uiComponents.templates[e.deviceId].fragments)),"ok"===p?(s=s.split("{{DEVICE_ACTIVE}}").join(SB.spec.strings.ACTIVE),SB.hasClass(r,"device-off")&&(SB.removeClass(r,"device-off"),SB.addClass(r,"device-on"),SB.putText(SB.getByTag("em",SB.getByTag("h2",r)[0])[0],SB.spec.strings.ACTIVE))):(s=s.split("{{DEVICE_ACTIVE}}").join(SB.spec.strings.INACTIVE),SB.hasClass(r,"device-on")&&(SB.removeClass(r,"device-on"),SB.addClass(r,"device-off"),SB.putText(SB.getByTag("em",SB.getByTag("h2",r)[0])[0],SB.spec.strings.INACTIVE))),r&&s&&e&&(SB.storage("state",SB.spec.state),s=(s=(s=s.split("{{DEVICE_ID}}").join(e.deviceId)).split("{{DEVICE_TYPE}}").join(e.typeClass)).split("{{DEVICE_SELECTED}}").join(i),s="ok"===e.state?s.split("{{DEVICE_STATE}}").join(" device-on"):s.split("{{DEVICE_STATE}}").join(" device-off"),s=i?(s=s.split("{{LAZY_LOAD_IMAGE}}").join("src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("data-placeholder-src"):(s=s.split("{{LAZY_LOAD_IMAGE}}").join("data-src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("src")),s&&(c.innerHTML=s,c=SB.getByTag("section",c)[0],(t=SB.getByTag("h2",c)[0]).parentNode.removeChild(t),c.innerHTML!==n&&(r.outerHTML=s,u=!0))),n=o=c=s=i=t=p=l=a=r=null,u},buildIndicator:function(){var e;SB.get("indicator")||((e=document.createElement("span")).id="indicator",SB.addClass(e,"connecting"),SB.putText(e,SB.spec.strings.CONNECTING),SB.spec.uiComponents.indicator=e,SB.spec.uiComponents.header.appendChild(e))},checkConnection:function(){var e=SB.spec.socket.readyState<=1;return e||(SB.spec.socketConnect(0),e=SB.spec.socket.readyState<=1),e},socketConnect:function(t){var e,i,s,o,n,r="https:"===window.location.protocol?"wss":"ws";SB.spec.socket.readyState&&3!==SB.spec.socket.readyState||(SB.log("Connecting","WebSocket","info"),SB.spec.socket=new WebSocket(r+"://"+window.location.host,"echo-protocol"),t+=1,e=function(){var e=Math.round(Math.min(Math.max(t*(15*Math.random()),10),60));SB.log("Retrying in "+e+"s","WebSocket","info"),SB.spec.uiComponents.indicator.className="disconnected",SB.putText(SB.spec.uiComponents.indicator,SB.spec.strings.DISCONNECTED),setTimeout(function(){SB.spec.socketConnect(t)},1e3*e)}),i=function(){var e="disconnected"===SB.spec.uiComponents.indicator.className;SB.spec.uiComponents.indicator.className="connected",SB.putText(SB.spec.uiComponents.indicator,SB.spec.strings.CONNECTED),SB.log("Connected","WebSocket","success"),e&&(SB.spec.socket.send("fetch state"),SB.log("Reconnected","WebSocket","success"))},s=function(e){var t,i=SB.decode(e.data),s={};if("string"==typeof i.speech)i.speech&&(SB.log(i.speech,"Speech","success"),SB.speak(i.speech,i.language,i.voice));else if("string"==typeof i.sound)SB.log(i.sound,"Sound","success"),SB.sound.play("/mp3/"+i.sound+".mp3");else if("string"==typeof i.vibrate)SB.log(i.vibrate,"Vibrate","success"),SB.vibrate(100*i.vibrate);else if("string"==typeof i.title)t=function(){i.deviceId&&SB.spec.navChange(i.deviceId)},SB.notify(i.title,i.options,t);else if("string"==typeof i.deviceId)SB.spec.updateTemplate(i);else if("object"==typeof i){for(s in i)if(i.hasOwnProperty(s))break;if(i[s]&&i[s].deviceId)for(s in SB.log("Received","State","success"),i)i.hasOwnProperty(s)&&(i[s].markup?(SB.spec.uiComponents.templates=i,SB.storage("templates",SB.spec.uiComponents.templates)):SB.spec.updateTemplate(i[s]))}},o=function(){SB.event.remove(SB.spec.socket,"close",o),SB.log("Disconnected","WebSocket","error"),e()},n=function(){SB.event.remove(SB.spec.socket,"open",i),SB.event.remove(SB.spec.socket,"message",s),SB.event.remove(SB.spec.socket,"close",o),SB.event.remove(SB.spec.socket,"error",n)},SB.event.add(SB.spec.socket,"open",i),SB.event.add(SB.spec.socket,"message",s),SB.event.add(SB.spec.socket,"close",o),SB.event.add(SB.spec.socket,"error",n)},statePoller:function(){var e;SB.log("not supported - using polling","WebSockets","error"),e={path:"/templates/",param:"ts="+(new Date).getTime(),method:"GET",onComplete:function(){SB.spec.uiComponents.templates=SB.decode(e.response),SB.storage("templates",SB.spec.uiComponents.templates)}},SB.ajax.request(e),setInterval(function(){var i={path:"/state/",param:"ts="+(new Date).getTime(),method:"GET",onComplete:function(){var e,t=SB.decode(i.response);if(t)for(e in SB.spec.uiComponents.indicator.className="connected",SB.putText(SB.spec.uiComponents.indicator,SB.spec.strings.CONNECTED),setTimeout(function(){SB.spec.uiComponents.indicator.className="connecting",SB.putText(SB.spec.uiComponents.indicator,SB.spec.strings.CONNECTIG)},1e3),t)t.hasOwnProperty(e)&&SB.spec.updateTemplate(t[e]);else SB.spec.uiComponents.indicator.className="disconnected",SB.putText(SB.spec.uiComponents.indicator,SB.spec.strings.DISCONNECTED)}};SB.ajax.request(i)},1e4)},lazyLoad:function(e){var t,i,s,o,n=0;if(SB.get(e))for(t=SB.get(e),i=Array.prototype.slice.call(SB.getByTag("img",t)),s=Array.prototype.slice.call(SB.getByTag("iframe",t)),o=i.concat(s);n<o.length;n+=1)o[n].getAttribute("data-src")&&!o[n].getAttribute("data-placeholder-src")&&(o[n].setAttribute("data-placeholder-src",o[n].src),o[n].src=o[n].getAttribute("data-src"),o[n].removeAttribute("data-src"))},lazyUnLoad:function(e){var t,i,s,o=0;if(e)for(t=Array.prototype.slice.call(SB.getByTag("img",e)),i=Array.prototype.slice.call(SB.getByTag("iframe",e)),s=t.concat(i),o=0;o<s.length;o+=1)s[o].getAttribute("src")&&(s[o].setAttribute("data-src",s[o].src),SB.hasClass(s[o],"streaming")&&(s[o].src=s[o].getAttribute("data-placeholder-src"),s[o].removeAttribute("data-placeholder-src")))},openModal:function(e){var t,i,s,o,n,r=e.getAttribute("data-modal-container"),a=SB.get(r),l=e.getAttribute("title"),p=e.href,c=p.split(".").pop(),u=SB.getByClass("close-modal",a,"a")||[];switch(u.length&&this.closeModal(u[0]),c.toLowerCase()){case"jpg":case"jpeg":case"gif":case"png":(t=document.createElement("img")).src=p,t.alt=l;break;case"mkv":case"mp4":case"ogg":(t=document.createElement("video")).src=p,t.title=l,t.setAttribute("controls",""),t.setAttribute("autoplay",""),t.setAttribute("type","video/mp4");break;case"mp3":(t=document.createElement("video")).src=p,t.title=l,t.setAttribute("controls",""),t.setAttribute("autoplay",""),t.setAttribute("type","audio/mp3")}t&&((i=document.createElement("div")).className="curtain",i.setAttribute("data-modal-container",r),(s=document.createElement("div")).className="modal",(o=document.createElement("a")).className="close-modal fa fa-close device-active",o.href="#",o.title=SB.spec.strings.CLOSE,o.setAttribute("data-modal-container",r),n=document.createElement("span"),SB.putText(n,SB.spec.strings.CLOSE),o.appendChild(n),s.appendChild(o),s.appendChild(t),i.appendChild(s),a.appendChild(i),setTimeout(function(){o.focus()},10))},closeModal:function(e){var t=SB.get(e.getAttribute("data-modal-container"));t.removeChild(SB.getByClass("curtain",t,"div")[0])},command:function(i){function s(){r=null,l=750,E=!(c=!(u=!(a=0))),d=S=0}function o(e){var t=r;SB.vibrate(),i||SB.spec.sendTextInput(e,t,"text"),s()}function n(e){var t=SB.getTarget(e),i=t.tagName.toLowerCase(),s=null;return t="img"===i?t.parentNode:t,t="i"===i?t.parentNode:t,"a"!==(t="span"===i?t.parentNode:t).tagName.toLowerCase()&&"curtain"!==t.className||(s=t),s}function t(e,t){var i=n(e);t?(SB.vibrate(),r=SB.getTarget(e).parentNode.parentNode.id,SB.transcribe(o).start()):i&&!u&&(SB.hasClass(i,"modal")?SB.spec.openModal(i):SB.hasClass(i,"close-modal")||SB.hasClass(i,"curtain")?SB.spec.closeModal(i):(r=i.href,B()))}var r=null,a=0,l=750,p=!1,c=!1,u=!1,E=!0,S=0,d=0,B=function(){var e;r&&!u&&(SB.vibrate(),i?SB.log("Issued","Demo Command","success"):SB.spec.socket?SB.spec.checkConnection()&&(SB.log("Issued","Command","success"),SB.spec.socket.send(r)):(e={path:r,param:"ts="+(new Date).getTime(),method:"GET",onComplete:function(){SB.log(e.response)}},SB.ajax.request(e)),3<a&&(l=650),10<a&&(l=500),a+=1,setTimeout(B,l))};"ontouchstart"in document.documentElement&&(SB.log("Enabled","Touch Events","info"),SB.event.add(SB.spec.uiComponents.body,"touchstart",function(e){E=!(c=p=!0),n(e)&&(u=!1,S=parseInt(e.changedTouches[0].clientX,10),d=parseInt(e.changedTouches[0].clientY,10),setTimeout(function(){E||(p=!1,t(e))},450))}),SB.event.add(SB.spec.uiComponents.body,"contextmenu",function(e){e.preventDefault()}),SB.event.add(SB.spec.uiComponents.body,"touchend",function(e){!SB.hasClass(SB.getTarget(e).parentNode,"emoji")&&p&&(E=!0,t(e)),s()}),SB.event.add(SB.spec.uiComponents.body,"touchmove",function(e){c&&(5<Math.abs(parseInt(e.changedTouches[0].clientX,10)-S)||5<Math.abs(parseInt(e.changedTouches[0].clientY,10)-d))&&s()}),SB.event.add(SB.spec.uiComponents.body,"touchcancel",function(e){s()})),SB.event.add(SB.spec.uiComponents.body,"mousedown",function(e){SB.hasClass(SB.getTarget(e).parentNode,"emoji")?t(e,!0):!1===c&&!1===p&&(u=!1,t(e)),p=!1}),SB.event.add(SB.spec.uiComponents.body,"mouseup",function(e){SB.hasClass(SB.getTarget(e).parentNode,"emoji")||s()}),SB.event.add(SB.spec.uiComponents.body,"click",function(e){var t,i,s,o;n(e)&&(t=e,i=SB.getTarget(t),s=i.tagName.toLowerCase(),o=!1,i="img"===s?i.parentNode:i,i="i"===s?i.parentNode:i,"a"===(i="span"===s?i.parentNode:i).tagName.toLowerCase()&&"_blank"===i.target&&(o=!0),!o)&&e.preventDefault()}),SB.event.add(SB.spec.uiComponents.body,"keyup",function(e){13===e.keyCode&&n(e)&&(u=!1,t(e),setTimeout(function(){u=!0},l/2))})},sendInput:function(e){var t=SB.getByTag("input",e,"input")[0],i=t.value,s=t.name,o=SB.getByClass("input-type",e,"input")[0].value;"text"===t.type&&(t.value=""),SB.spec.sendTextInput(i,s,o)},sendTextInput:function(e,t,i){var s;i=i||"text",SB.spec.socket?SB.spec.checkConnection()&&(SB.log("Issued","Text Command","success"),SB.spec.socket.send("/?"+t+"="+i+"-"+e)):(s={path:"/",param:t+"="+i+"-"+e+"&ts="+(new Date).getTime(),method:"POST",onComplete:function(){SB.log(s.response)}},SB.ajax.request(s))},formInput:function(n){SB.event.add(SB.spec.uiComponents.body,"submit",function(e){var t=SB.getTarget(e);e.preventDefault(),n?SB.log("Issued","Demo Text Command","success"):SB.spec.sendInput(t)}),SB.event.add(SB.spec.uiComponents.body,"change",function(e){var t,i,s=SB.getTarget(e),o=s.type;("range"===o||"number"===o&&void 0!==s.max&&void 0!==s.min)&&("range"===o?"number"===(i=s.previousElementSibling).type&&(i.value=s.value):"number"===o&&"range"===(t=s.nextElementSibling).type&&(t.value=s.value),n?SB.log("Issued","Demo Form Command","success"):SB.spec.sendInput(s.form))})},nav:function(){SB.event.add(SB.spec.uiComponents.header,"click",function(e){var t=SB.getTarget(e).parentNode;"li"===t.tagName.toLowerCase()?(e.preventDefault(),SB.spec.navChange(t.className),SB.vibrate(),SB.notifyAsk()):"indicator"===SB.getTarget(e).id&&SB.hasClass(SB.getTarget(e),"disconnected")&&SB.spec.socketConnect(0)})},init:function(){var e,t,i,s=SB.storage("selected"),o=SB.storage("templates"),n=SB.storage("state");if(SB.spec.uiComponents.header=SB.getByTag("header")[0],SB.spec.uiComponents.body=SB.getByTag("main")[0],SB.spec.buildIndicator(),t=SB.spec.uiComponents.header.dataset,i=SB.spec.uiComponents.body.dataset,SB.spec.strings={CURRENT:t.stringCurrent,CONNECTED:t.stringConnected,CONNECTING:t.stringConnecting,DISCONNECTED:t.stringDisconnected,ACTIVE:i.stringActive,INACTIVE:i.stringInactive,ON:i.stringOn,OFF:i.stringOff,CLOSE:i.stringClose,AM:i.stringAm,PM:i.stringPm,SUN:i.stringSun,MON:i.stringMon,TUE:i.stringTue,WED:i.stringWed,THUR:i.stringThur,FRI:i.stringFri,SAT:i.stringSat},s&&SB.spec.navChange(s),o&&n)for(e in SB.spec.uiComponents.templates=SB.decode(o),n=SB.decode(n))n.hasOwnProperty(e)&&SB.spec.updateTemplate(n[e]);"function"==typeof WebSocket||"object"==typeof WebSocket?SB.spec.socketConnect(0):SB.spec.statePoller(),SB.spec.lazyLoad(s||document.body.className),SB.spec.command(!1),SB.spec.formInput(!1),SB.spec.nav(),SB.spec.ariaDevice()}}}(),function(e){"use strict";e.activeBuilding=function(e,t,i,s,o){function n(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"activeBuilding"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"activeBuilding",o)}var r,a="",l="",p="",c="";return i&&s&&(r=s,c="object"==typeof SB&&"object"==typeof SB.util?SB.util.arrayList(r,"activeBuilding",o):require(__dirname+"/../../lib/sharedUtil").util.arrayList(r,"activeBuilding",o)),s&&0!==s.length?1===s.length?(l="ok",p="tag",a=n("SINGLE_PACKAGE")):1<s.length&&(l="ok",p="tags",a=n("PLURAL_PACKAGES")):(l="err",p="times",a=n("NO_PACKAGES")),a=a.split("{{SENDERS}}").join(c),t=(t=(t=t.replace("{{ACTIVEBUILDING_STATE}}",l)).replace("{{ACTIVEBUILDING_ICON}}",p)).replace("{{ACTIVEBUILDING_DYNAMIC}}",a)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.airQuality=function(e,t,i,s,o){var n,r=o.report,a=o.graph,l=0,p="",c="",u="";if(s)for(l in p=s.location,s.report)s.report.hasOwnProperty(l)&&(u="",(n=s.report[l].max)&&(u=(u=a.split("{{MAX_VALUE}}").join(n)).split("{{PERCENT_QUALITY}}").join(Math.round(s.report[l].value/n*100))),c=(c=(c=(c=(c+=r.split("{{AIR_QUALITY_GRAPH}}").join(u)).split("{{AIR_QUALITY_TYPE}}").join(s.report[l].type)).split("{{AIR_QUALITY_VALUE}}").join(s.report[l].value)).split("{{AIR_QUALITY_UNITS}}").join(s.report[l].units)).split("{{AIR_QUALITY_HIGH}}").join(s.report[l].high));return(t=t.replace("{{AIR_QUALITY_LOCATION}}",p)).replace("{{AIR_QUALITY_DYNAMIC}}",c)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.debug=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"debug"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"debug",n)}function a(e){var t=e/1e3;return"object"==typeof SB&&"object"==typeof SB.util?SB.util.displayRelativeTime(t):require(__dirname+"/../../lib/sharedUtil").util.displayRelativeTime(t)}var l,p=(new Date).getTime(),c="",u="",E=0,S=0,d=0,B=0,T=0,f=r("NA");return s&&(c=a(s.uptime),u=a(p-s.startup),E=s.memoryUsed,S=s.totalMemory,d=s.percentMemory,B=Math.round(100*s.cpuLoad[0]),T=s.clientCount,f=s.temperature?s.temperature:f),t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("{{DEBUG_UPDATE}}",(l=p,"object"==typeof SB&&"object"==typeof SB.util?SB.util.displayTime(l,r):require(__dirname+"/../../lib/sharedUtil").util.displayTime(l,r)))).replace("{{DEBUG_UPTIME}}",c)).replace("{{DEBUG_RUNTIME}}",u)).replace("{{DEBUG_MEMORY_USED}}",E)).replace("{{DEBUG_SYSTEM_MEMORY}}",S)).replace("{{DEBUG_MEMORY_PERCENT}}",d)).replace("{{DEBUG_CPU}}",B)).replace("{{DEBUG_CLIENT_TEMP}}",f)).replace("{{DEBUG_CLIENT_COUNT}}",T)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.denon=function(e,t,i,s){return s&&(t=t.split("{{DEVICE_POWER}}").join(s.power),s.ZONE1&&(t=(t=(t=(t=(t=(t=t.split("{{DEVICE_Z1_INPUT}}").join(s.ZONE1.input)).split("{{DEVICE_Z1_POWER}}").join(s.ZONE1.power)).split("{{DEVICE_Z1_MUTE}}").join(s.ZONE1.mute)).split("{{DEVICE_Z1_MODE}}").join(s.ZONE1.mode)).split("{{DEVICE_Z1_VOLUME}}").join(s.ZONE1.volume)).split("{{DEVICE_Z1_MAXVOLUME}}").join(s.ZONE1.maxvolume)),s.ZONE2&&(t=(t=(t=t.split("{{DEVICE_Z2_POWER}}").join(s.ZONE2.power)).split("{{DEVICE_Z2_INPUT}}").join(s.ZONE2.input)).split("{{DEVICE_Z2_VOLUME}}").join(s.ZONE2.volume)),s.ZONE3&&(t=(t=(t=t.split("{{DEVICE_Z3_POWER}}").join(s.ZONE3.power)).split("{{DEVICE_Z3_INPUT}}").join(s.ZONE3.input)).split("{{DEVICE_Z3_VOLUME}}").join(s.ZONE3.volume))),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.split("{{DEVICE_POWER}}").join("")).split("{{DEVICE_Z1_POWER}}").join("")).split("{{DEVICE_Z1_INPUT}}").join("")).split("{{DEVICE_Z1_MUTE}}").join("")).split("{{DEVICE_Z1_MODE}}").join("")).split("{{DEVICE_Z1_VOLUME}}").join("")).split("{{DEVICE_Z1_MAXVOLUME}}").join("")).split("{{DEVICE_Z2_POWER}}").join("")).split("{{DEVICE_Z2_INPUT}}").join("")).split("{{DEVICE_Z2_VOLUME}}").join("")).split("{{DEVICE_Z3_POWER}}").join("")).split("{{DEVICE_Z3_INPUT}}").join("")).split("{{DEVICE_Z3_VOLUME}}").join("")}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.dLinkCamera=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"dLinkCamera"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"dLinkCamera",n)}var a,l,p,c,u,E,S,d=o.photo,B=o.photos,T=o.video,f=o.videos,_=o.thumb,m="",C="",A="",g="",I="",v=0,j=0;if("on"===(s=s||{}).alarm?(m=" device-active",A=r("CAMERA_ARMED")):"off"===s.alarm&&(C=" device-active",A=r("CAMERA_DISARMED")),t=(t=(t=(t=(t=(t=(t=t.split("{{DEVICE_STATE_ON}}").join(m)).split("{{DEVICE_STATE_OFF}}").join(C)).split("{{ARMED_STATUS}}").join(A)).split("{{DISARMED_STATUS}}").join(A)).split("{{SCREENSHOT}}").join(r("SCREENSHOT"))).split("{{THUMBNAIL}}").join(r("THUMBNAIL"))).split("{{VIDEO}}").join(r("VIDEO")),s.photos&&s.photos.length){for(;v<s.photos.length;v+=1)g=(g+=d.split("{{PHOTO_NAME}}").join(s.photos[v].name)).split("{{PHOTO_URL}}").join(s.photos[v].photo);g=(g=g.split("{{PHOTO}}").join(r("PHOTO"))).split("{{DEVICE_ID}}").join(e),g=B.split("{{DLINKCAMERA_PHOTOS}}").join(g),t=t.split("{{DLINKCAMERA_PHOTO_LIST}}").join(g)}if(t=t.split("{{DLINKCAMERA_PHOTO_LIST}}").join(""),s.videos&&s.videos.length){for(;j<s.videos.length;j+=1)(S=s.videos[j].thumb||"")&&(I=(I=I.split("{{VIDEO_THUMB}}").join(_)).split("{{THUMB_URL}}").join(S)),I=(I=(I+=T.split("{{VIDEO_NAME}}").join(s.videos[j].name)).split("{{SCREEN_URL}}").join(s.videos[j].screen)).split("{{VIDEO_URL}}").join(s.videos[j].video);I=(I=(I=(I=(I=I.split("{{VIDEO_THUMB}}").join("")).split("{{SCREENSHOT}}").join(r("SCREENSHOT"))).split("{{THUMBNAIL}}").join(r("THUMBNAIL"))).split("{{VIDEO}}").join(r("VIDEO"))).split("{{DEVICE_ID}}").join(e),I=f.split("{{DLINKCAMERA_VIDEOS}}").join(I),t=t.split("{{DLINKCAMERA_VIDEO_LIST}}").join(I)}return t=t.split("{{DLINKCAMERA_VIDEO_LIST}}").join(""),"object"==typeof SB&&(c=SB.getByClass("image-list",SB.get(e),"div")[0],p=SB.getByTag("ol",c)[0],E=SB.getByClass("video-list",SB.get(e),"div")[0],u=SB.getByTag("ol",E)[0],SB.hasClass(SB.getByClass("selected",null,"li")[0],e)&&(t=t.split("{{LAZY_LOAD_IMAGE}}").join("src")),t=(t=t.split("{{LAZY_LOAD_IMAGE}}").join("data-src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("data-placeholder-image"),a=SB.getByClass("fa-lock",SB.get(e),"a")[0],l=SB.getByClass("fa-unlock",SB.get(e),"a")[0],p&&g!==p.outerHTML&&c.removeChild(p),!s.photos||p&&g===p.outerHTML||(g=SB.hasClass(SB.getByClass("selected",null,"li")[0],e)?(g=g.split("{{LAZY_LOAD_IMAGE}}").join("src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("data-placeholder-src"):(g=g.split("{{LAZY_LOAD_IMAGE}}").join("data-src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("src"),c.innerHTML=g),u&&I!==u.outerHTML&&E.removeChild(u),!s.videos||u&&I===u.outerHTML||(I=SB.hasClass(SB.getByClass("selected",null,"li")[0],e)?(I=I.split("{{LAZY_LOAD_IMAGE}}").join("src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("data-placeholder-src"):(I=I.split("{{LAZY_LOAD_IMAGE}}").join("data-src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("src"),E.innerHTML=I),"on"!==s.alarm||SB.hasClass(a,"device-on")?"off"!==s.alarm||SB.hasClass(l,"device-on")||(SB.addClass(l,"device-active"),SB.removeClass(a,"device-active"),SB.putText(SB.getByTag("em",a)[0],A),SB.putText(SB.getByTag("em",l)[0],A),t=""):(SB.addClass(a,"device-active"),SB.removeClass(l,"device-active"),SB.putText(SB.getByTag("em",a)[0],A),SB.putText(SB.getByTag("em",l)[0],A),t="")),t}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.enviro=function(e,t,i,s,o){var n,r,a,l,p,c=o.report,u=o.graph,E=o.low,S=o.optimum,d=0,B="",T="";if(s)for(d in s.report)s.report.hasOwnProperty(d)&&(T="",n=s.report[d].low,r=s.report[d].optimum,a=s.report[d].high,p=void 0===(l=s.report[d].max)?"":Math.round(s.report[d].value/l*100),isNaN(l)||(T=(T=(T=(T=(T=u.split("{{ENVIRO_LOW}}").join(n)).split("{{ENVIRO_OPTIMUM}}").join(r)).split("{{ENVIRO_HIGH}}").join(a)).split("{{ENVIRO_MAX}}").join(l)).split("{{PERCENT_QUALITY}}").join(p),isNaN(n)||(T=(T=T.split("{{LOW}}").join(E)).split("{{ENVIRO_LOW}}").join(n)),isNaN(r)||(T=(T=T.split("{{OPTIMUM}}").join(S)).split("{{ENVIRO_OPTIMUM}}").join(r)),T=(T=T.split("{{LOW}}").join("")).split("{{OPTIMUM}}").join("")),B=(B=(B=(B+=c.split("{{ENVIRO_GRAPH}}").join(T)).split("{{ENVIRO_TYPE}}").join(s.report[d].type)).split("{{ENVIRO_VALUE}}").join(s.report[d].value)).split("{{ENVIRO_UNITS}}").join(s.report[d].units));return t.replace("{{ENVIRO_DYNAMIC}}",B)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.foscam=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"foscam"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"foscam",n)}var a,l,p,c,u,E,S,d=o.photo,B=o.photos,T=o.video,f=o.videos,_=o.thumb,m="",C="",A="",g="",I="",v=0,j=0;if("on"===(s=s||{}).alarm?(m=" device-active",A=r("CAMERA_ARMED")):"off"===s.alarm&&(C=" device-active",A=r("CAMERA_DISARMED")),t=(t=(t=(t=(t=(t=(t=t.split("{{DEVICE_STATE_ON}}").join(m)).split("{{DEVICE_STATE_OFF}}").join(C)).split("{{ARMED_STATUS}}").join(A)).split("{{DISARMED_STATUS}}").join(A)).split("{{SCREENSHOT}}").join(r("SCREENSHOT"))).split("{{THUMBNAIL}}").join(r("THUMBNAIL"))).split("{{VIDEO}}").join(r("VIDEO")),s.photos&&s.photos.length){for(;v<s.photos.length;v+=1)g=(g+=d.split("{{PHOTO_NAME}}").join(s.photos[v].name)).split("{{PHOTO_URL}}").join(s.photos[v].photo);g=(g=g.split("{{PHOTO}}").join(r("PHOTO"))).split("{{DEVICE_ID}}").join(e),g=B.split("{{FOSCAM_PHOTOS}}").join(g),t=t.split("{{FOSCAM_PHOTO_LIST}}").join(g)}if(t=t.split("{{FOSCAM_PHOTO_LIST}}").join(""),s.videos&&s.videos.length){for(;j<s.videos.length;j+=1)(S=s.videos[j].thumb||"")&&(I=(I=I.split("{{VIDEO_THUMB}}").join(_)).split("{{THUMB_URL}}").join(S)),I=(I=(I+=T.split("{{VIDEO_NAME}}").join(s.videos[j].name)).split("{{SCREEN_URL}}").join(s.videos[j].screen)).split("{{VIDEO_URL}}").join(s.videos[j].video);I=(I=(I=(I=(I=I.split("{{VIDEO_THUMB}}").join("")).split("{{SCREENSHOT}}").join(r("SCREENSHOT"))).split("{{THUMBNAIL}}").join(r("THUMBNAIL"))).split("{{VIDEO}}").join(r("VIDEO"))).split("{{DEVICE_ID}}").join(e),I=f.split("{{FOSCAM_VIDEOS}}").join(I),t=t.split("{{FOSCAM_VIDEO_LIST}}").join(I)}return t=t.split("{{FOSCAM_VIDEO_LIST}}").join(""),"object"==typeof SB&&(c=SB.getByClass("image-list",SB.get(e),"div")[0],p=SB.getByTag("ol",c)[0],E=SB.getByClass("video-list",SB.get(e),"div")[0],u=SB.getByTag("ol",E)[0],SB.hasClass(SB.getByClass("selected",null,"li")[0],e)&&(t=t.split("{{LAZY_LOAD_IMAGE}}").join("src")),t=(t=t.split("{{LAZY_LOAD_IMAGE}}").join("data-src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("data-placeholder-image"),a=SB.getByClass("fa-lock",SB.get(e),"a")[0],l=SB.getByClass("fa-unlock",SB.get(e),"a")[0],p&&g!==p.outerHTML&&c.removeChild(p),!s.photos||p&&g===p.outerHTML||(g=(g=SB.hasClass(SB.getByClass("selected",null,"li")[0],e)?g.split("{{LAZY_LOAD_IMAGE}}").join("src"):g.split("{{LAZY_LOAD_IMAGE}}").join("data-src")).split("{{LAZY_PLACEHOLDER_IMAGE}}").join("data-placeholder-src"),c.innerHTML=g),u&&I!==u.outerHTML&&E.removeChild(u),!s.videos||u&&I===u.outerHTML||(I=SB.hasClass(SB.getByClass("selected",null,"li")[0],e)?I.split("{{LAZY_LOAD_IMAGE}}").join("src"):I.split("{{LAZY_LOAD_IMAGE}}").join("data-src"),g=g.split("{{LAZY_PLACEHOLDER_IMAGE}}").join("data-placeholder-image"),E.innerHTML=I),"on"!==s.alarm||SB.hasClass(a,"device-on")?"off"!==s.alarm||SB.hasClass(l,"device-on")||(SB.addClass(l,"device-active"),SB.removeClass(a,"device-active"),SB.putText(SB.getByTag("em",a)[0],A),SB.putText(SB.getByTag("em",l)[0],A),t=""):(SB.addClass(a,"device-active"),SB.removeClass(l,"device-active"),SB.putText(SB.getByTag("em",a)[0],A),SB.putText(SB.getByTag("em",l)[0],A),t="")),t}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.geiger=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"geiger"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"geiger",n)}var a,l,p,c,u=o.report,E=o.graph,S="",d="",B=0;if(s&&s.report&&s.report[0])for(;B<s.report[0].length;B+=1)d="",(a=s.report[0][B]).max&&(d=(d=E.split("{{MAX_VALUE}}").join(a.max)).split("{{PERCENT_QUALITY}}").join(Math.round(a.value/a.max*100))),t=(t=t.split("{{GEIGER_TIME}}").join((c=a.time,"object"==typeof SB&&"object"==typeof SB.util?SB.util.displayTime(c,r):require(__dirname+"/../../lib/sharedUtil").util.displayTime(c,r)))).split("{{GEIGER_TIMESTAMP}}").join((l=a.time,p=void 0,(p=new Date(l)).toISOString?p.toISOString():l)),S=(S=(S=(S=(S+=u.split("{{GEIGER_GRAPH}}").join(d)).split("{{GEIGER_TYPE}}").join(a.type)).split("{{GEIGER_VALUE}}").join(a.value)).split("{{GEIGER_UNITS}}").join(a.units)).split("{{GEIGER_HIGH}}").join(a.high);return t.replace("{{GEIGER_DYNAMIC}}",S)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.gerty=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"gerty"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"gerty",n)}var a,l,p,c,u,E=o.comment,S="",d="";if(s.comments)for(l in s.comments)s.comments.hasOwnProperty(l)&&(u=s.comments[l].time,a="object"==typeof SB&&"object"==typeof SB.util?SB.util.displayTime(u,r):require(__dirname+"/../../lib/sharedUtil").util.displayTime(u,r),d=(d=(d=(d+=E.split("{{TIME}}").join(a)).split("{{CODE}}").join(s.comments[l].code)).split("{{NAME}}").join(s.comments[l].name)).split("{{COMMENT}}").join(s.comments[l].text));return t="object"==typeof SB?(p=SB.getByTag("span",SB.get(e))[0],c=SB.getByTag("ol",SB.get(e))[0],p&&p.innerHTML!==s.emoji&&(SB.putText(p,s.emoji),p.className=s.action||""),c&&c.innerHTML!==d&&(c.innerHTML=d,c.scrollTop=c.scrollHeight),""):(s.action&&(S=' class="'+s.action+'"'),(t=(t=t.split("{{GERTY_ACTION}}").join(S)).split("{{GERTY_DYNAMIC}}").join(s.emoji)).split("{{GERTY_COMMENTS}}").join(d))}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.github=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"github"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"github",n)}var a,l=o.commit,p=o.message,c="",u="",E=0,S=null,d=null,B="";if(i&&s)for(;E<s.length;E+=1)a=s[E].time,u="object"==typeof SB&&"object"==typeof SB.util?SB.util.displayTime(a,r,"long"):require(__dirname+"/../../lib/sharedUtil").util.displayTime(a,r,"long"),c=(c=(c+=l.split("{{GITHUB_URL}}").join(s[E].url)).split("{{GITHUB_TITLE}}").join(u)).split("{{GITHUB_DESCRIPTION}}").join(s[E].description),!1===s[E].upToDate?d="NEWER":!0===s[E].upToDate&&(S="LATEST");return t=t.replace("{{GITHUB_DYNAMIC}}",c),d?B=r(d):S&&(B=r(S)),c=p.replace("{{GITHUB_MESSAGE}}",B),t=t.replace("{{GITHUB_MESSAGE}}",c)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.haveibeenpwned=function(e,t,i,s,o,n){var r,a=o.allClear,l=o.pwns,p=o.pwn,c="",u=0;if(i&&s&&s.length){for(;u<s.length;u+=1)c=(c=(c=(c+=p.split("{{HAVEIBEENPWNED_TITLE}}").join(s[u].title)).split("{{HAVEIBEENPWNED_DATETIME}}").join(s[u].date)).split("{{HAVEIBEENPWNED_DATE}}").join(s[u].date)).split("{{HAVEIBEENPWNED_DESCRIPTION}}").join(s[u].description);c=l.split("{{HAVEIBEENPWNED_PWNS}}").join(c)}else c=a.split("{{HAVEIBEENPWNED_ALL_CLEAR}}").join((r="ALL_CLEAR",r="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(r,"haveibeenpwned"):require(__dirname+"/../../lib/sharedUtil").util.translate(r,"haveibeenpwned",n)));return t=t.replace("{{HAVEIBEENPWNED_DYNAMIC}}",c)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.location=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"location"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"location",n)}var a,l=o.item,p="",c=0;if(s)for(;c<s.length;c+=1)p=(p=(p=(p=(p+=l.split("{{LOCATION_NAME}}").join(s[c].name)).split("{{LOCATION_URL}}").join(s[c].url)).split("{{LOCATION_TIME}}").join((a=s[c].time,"object"==typeof SB&&"object"==typeof SB.util?SB.util.displayTime(a,r):require(__dirname+"/../../lib/sharedUtil").util.displayTime(a,r)))).split("{{LOCATION_ALTITUDE}}").join(s[c].alt)).split("{{LOCATION_SPEED}}").join(Math.ceil(s[c].speed));return t=t.replace("{{LOCATION_DYNAMIC}}",p)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.monoPrice3dPrinter=function(e,t,i,s){return s=s||{},t=(t=(t=(t=(t=t.split("{{EXTRUDER_TEMP}}").join(s.extruderTemp)).split("{{EXTRUDER_TARGET}}").join(s.extruderTarget)).split("{{BED_TEMP}}").join(s.bedTemp)).split("{{BED_TARGET}}").join(s.bedTarget)).split("{{PERCENT_COMPLETE}}").join(s.percent)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.neato=function(e,t,i,s,o,n){var r,a="empty",l=0,p=!1,c="UNDOCKED";return s&&(l=s.battery,p=s.charging,c=s.docked?"DOCKED":"UNDOCKED",25<l&&(a="quarter"),50<l&&(a="half"),75<l&&(a="three-quarters"),95<=l&&(a="full")),t=(t=(t=(t=t.split("{{DEVICE_BATTERY_LEVEL}}").join(l+"%")).split("{{DEVICE_STATE_BATTERY_CLASS}}").join(a)).split("{{DEVICE_STATE_CHARGING}}").join(p?" device-active":"")).split("{{DOCK_STATUS}}").join((r=c,r="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(r,"neato"):require(__dirname+"/../../lib/sharedUtil").util.translate(r,"neato",n)))}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.nest=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB?SB.util.fToC(e):require(__dirname+"/../../lib/sharedUtil").util.fToC(e)}function a(e){return"group-"+(e="object"==typeof SB?SB.util.encodeName(e):require(__dirname+"/../../lib/sharedUtil").util.encodeName(e))}function l(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"nest"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"nest",n)}var p,c,u,E,S=o.thermostat,d=o.protect,B=o.group,T="",f="",_="",m={};if(s){for(p in s.devices)if(s.devices.hasOwnProperty(p))if("thermostat"===(m=s.devices[p]).type){switch("object"==typeof SB&&SB.getByClass(a(m.label),SB.get(e),"li")[0]&&(E=SB.getByClass(a(m.label),SB.get(e),"li")[0],c=SB.getByClass("fa-sun-o",E,"a")[0],u=SB.getByClass("fa-snowflake-o",E,"a")[0],"cool"!==m.state||SB.hasClass(u,"device-active")?"heat"!==m.state||SB.hasClass(c,"device-active")?"off"!==m.state||SB.hasClass(E,"device-off")||(SB.addClass(E,"device-off"),SB.removeClass(u,"device-active"),SB.removeClass(c,"device-active"),SB.putText(SB.getByTag("em",E)[0],l("OFF")),t=""):(SB.addClass(c,"device-active"),SB.removeClass(u,"device-active"),SB.removeClass(E,"device-off"),SB.putText(SB.getByTag("em",E)[0],l("HEAT")),t=""):(SB.addClass(u,"device-active"),SB.removeClass(c,"device-active"),SB.removeClass(E,"device-off"),SB.putText(SB.getByTag("em",E)[0],l("COOL")),t="")),T=(T=(T=(T=(T=(T=(T+=S.split("{{SUB_DEVICE_ID}}").join(m.label.split(" ").join("+"))).split("{{SUB_DEVICE_NAME}}").join(m.label)).split("{{SUB_DEVICE_MAX}}").join(Math.round(m.celsius?r(90):90))).split("{{SUB_DEVICE_MIN}}").join(Math.round(m.celsius?r(50):50))).split("{{SUB_DEVICE_TEMP}}").join(Math.round(m.temp))).split("{{SUB_DEVICE_TARGET}}").join(Math.round(m.target))).split("{{SUB_DEVICE_HUMIDITY}}").join(Math.round(m.humidity)),m.state){case"cool":T=(T=T.split("{{DEVICE_STATE_COOL}}").join(" device-active")).split("{{SUB_DEVICE_STATUS}}").join(l("COOL"));break;case"heat":T=(T=T.split("{{DEVICE_STATE_HEAT}}").join(" device-active")).split("{{SUB_DEVICE_STATUS}}").join(l("HEAT"));break;default:T=(T=T.split("{{DEVICE_STATE_OFF}}").join(" device-off")).split("{{SUB_DEVICE_STATUS}}").join(l("OFF"))}!0===m.leaf&&(T=T.split("{{DEVICE_STATE_LEAF}}").join(" device-active")),T=(T=(T=(T=(T=(T=(T=s.presence&&"on"===s.presence?T.split("{{DEVICE_STATE_HOME}}").join(" device-active"):T.split("{{DEVICE_STATE_AWAY}}").join(" device-active")).split("{{DEVICE_STATE_COOL}}").join("")).split("{{DEVICE_STATE_HEAT}}").join("")).split("{{DEVICE_STATE_OFF}}").join("")).split("{{DEVICE_STATE_LEAF}}").join("")).split("{{DEVICE_STATE_HOME}}").join("")).split("{{DEVICE_STATE_AWAY}}").join("")}else"protect"===m.type&&(_="","ok"!==m.smoke&&(_+="smoke "),"ok"!==m.co&&(_+="co "),"ok"!==m.battery&&(_+="batt "),_&&(_+="device-active"),f=(f=(f=(f=(f+=d.split("{{SUB_DEVICE_STATE}}").join(_)).split("{{SUB_DEVICE_NAME}}").join(m.label)).split("{{SUB_DEVICE_SMOKE}}").join(m.smoke)).split("{{SUB_DEVICE_CO}}").join(m.co)).split("{{SUB_DEVICE_BATT}}").join(m.battery));T=T&&(T=(T=B.replace("{{SUB_DEVICE_LIST}}",T)).replace("{{SUB_DEVICE_CLASS}}"," control-device-status")).replace("{{SUB_DEVICE_NAME}}",l("THERMOSTAT")),f=f&&(f=(f=B.replace("{{SUB_DEVICE_LIST}}",f)).replace("{{SUB_DEVICE_CLASS}}"," text-device-status")).replace("{{SUB_DEVICE_NAME}}",l("PROTECT"))}return t=t.replace("{{NEST_DYNAMIC}}",T+f)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.octoprint=function(e,t,i,s,o){var n=o.video;return n="ok"===i&&s&&s.imagePath?(n=n.split("{{OCTOPRINT_DYNAMIC}}").join(s.imagePath)).split("{{OCTOPRINT_STYLE}}").join(s.styles||""):"",s=s||{},t=(t=(t=(t=(t=(t=t.split("{{EXTRUDER_TEMP}}").join(s.extruderTemp)).split("{{EXTRUDER_TARGET}}").join(s.extruderTarget)).split("{{BED_TEMP}}").join(s.bedTemp)).split("{{BED_TARGET}}").join(s.bedTarget)).split("{{PERCENT_COMPLETE}}").join(s.percent)).split("{{OCTOPRINT_VIDEO}}").join(n)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.piHole=function(e,t,i,s){var o,n=(new Date).getTime();return s=s||{},t=(t=(t=(t=(t=t.replace("{{PIHOLE_UPDATE}}",s.lastUpdate?(o=(n-s.lastUpdate)/1e3,"object"==typeof SB&&"object"==typeof SB.util?SB.util.displayRelativeTime(o):require(__dirname+"/../../lib/sharedUtil").util.displayRelativeTime(o)):"")).replace("{{PIHOLE_QUERIES_TODAY}}",s.queriesToday||"")).replace("{{PIHOLE_QUERIES_BLOCKED_TODAY}}",s.queriesBlockedToday||"")).replace("{{PIHOLE_PERCENT_BLOCKED_TODAY}}",s.percentBlockedToday||"")).replace("{{PIHOLE_DOMAINS_BLOCKED}}",s.domainsBlocked||"")}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.powerView=function(e,t,i,s,o,n){var r,a,l,p,c=o.blind,u=o.blinds,E=o.scene,S=o.scenes,d="",B="",T=0,f=0;if(s&&s.devices){for(;T<s.devices.length;T+=1)r=s.devices[T],d=(d=(d=(d=(d+=c.split("{{SUB_DEVICE_ID}}").join((p=r.label,p="object"==typeof SB?SB.util.encodeName(p):require(__dirname+"/../../lib/sharedUtil").util.encodeName(p)))).split("{{SUB_DEVICE_PERCENTAGE}}").join(r.state)).split("{{SUB_DEVICE_STATE_CLASS}}").join(r.battery&&r.battery<10?"peripheral batt":"")).split("{{SUB_DEVICE_STATE}}").join(r.battery?" ("+r.battery+"%)":"")).split("{{SUB_DEVICE_NAME}}").join(r.label);if(d=d.split("{{i18n_SET_PERCENTAGE}}").join((l="SET_PERCENTAGE",l="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(l,"powerView"):require(__dirname+"/../../lib/sharedUtil").util.translate(l,"powerView",n))),d=u.split("{{POWERVIEW_BLINDS}}").join(d),s.scenes.length){for(;f<s.scenes.length;f+=1)a=s.scenes[f],B=(B=(B+=E.split("{{SCENE_NAME_COMMAND}}").join(a.name.split(" ").join("+"))).split("{{SCENE_NAME}}").join(a.name)).split("{{SCENE_ICON}}").join(a.icon);B=S.split("{{POWERVIEW_SCENES}}").join(B)}}return t=t.split("{{POWERVIEW_DYNAMIC}}").join(d+B)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.raspberryRemote=function(e,t,i,s,o){var n,r,a=o.switch,l=0,p="";if(s&&"object"==typeof s&&(n=s.devices))for(l in n)n.hasOwnProperty(l)&&(p=(p+=(r=n[l],a.split("{{SUB_DEVICE_ID}}").join(r.label.split(" ").join("+")).split("{{SUB_DEVICE_NAME}}").join(r.label))).split("{{SUB_DEVICE_CLASS}}").join(n[l].className||"fa-lightbulb-o"));return t.replace("{{RASPBERRY_REMOTE_DYNAMIC}}",p)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.roku=function(e,t,i,s,o){var n=o.list,r=0,a="";if(s)for(r in s)s.hasOwnProperty(r)&&(a=(a=(a+=n.split("{{APP_ID}}").join(s[r].id)).split("{{APP_IMG}}").join(s[r].cache)).split("{{APP_NAME}}").join(s[r].name));return t.replace("{{ROKU_DYNAMIC}}",a)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.rss=function(e,t,i,s,o){var n=o.item,r="",a=0,l="";if(i&&s)for(;a<s.length;a+=1)l=s[a].description?s[a].description:s[a].text,r=(r=(r+=n.split("{{RSS_URL}}").join(s[a].url)).split("{{RSS_TITLE}}").join(s[a].title)).split("{{RSS_DESCRIPTION}}").join(l);return t=t.replace("{{RSS_DYNAMIC}}",r)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.smartthings=function(e,t,i,s,o,n){function a(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"smartthings"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"smartthings",n)}function r(e,t){var i={},s=[],o=0,n=0;for(o in t)t.hasOwnProperty(o)&&(i=t[o]).label===e&&(s[n]=i,n+=1);return s}function l(e){var t="",i="",s="",o=[],n="",r="";switch(e.type){case"switch":t=E,s="fa-lightbulb-o";break;case"lock":t=E,s="fa-unlock-alt";break;case"contact":t=S,s="fa-columns";break;case"water":t=S,s="fa-tint";break;case"motion":t=S,s="fa-street-view";break;case"presence":t=S,s="fa-male"}return e.peripheral&&e.peripheral.temp&&o.push(e.peripheral.temp+"&deg;"),e.peripheral&&e.peripheral.battery&&o.push(e.peripheral.battery+"%"),o.length&&(n=" ("+o.join(" ")+")"),e.peripheral&&"on"===e.peripheral.vibrate&&(r=" device-vibrate"),t&&(i=(i=(i=t.split("{{SUB_DEVICE_ID}}").join(e.label.split(" ").join("+"))).split("{{SUB_DEVICE_NAME}}").join(e.label+n)).split("{{SUB_DEVICE_CLASS}}").join(e.className||s),i="on"===e.state?(i=i.split("{{SUB_DEVICE_STATE}}").join(" device-active"+r)).split("{{SUB_DEVICE_STATUS}}").join(a("ACTIVE")):e.peripheral&&e.peripheral.battery&&e.peripheral.battery<10?(i=i.split("{{SUB_DEVICE_STATE}}").join(" peripheral batt"+r)).split("{{SUB_DEVICE_STATUS}}").join(a("INACTIVE")):(i=i.split("{{SUB_DEVICE_STATE}}").join(r)).split("{{SUB_DEVICE_STATUS}}").join(a("INACTIVE"))),i}var p,c,u,E=o.action,S=o.static,d=o.group,B=0,T=0,f="",_="",m="";if(s&&"object"==typeof s&&"string"==typeof s.mode){if(_=s.mode,p=s.devices)if(s.groups){for(B in s.groups)if(s.groups.hasOwnProperty(B)){for(T in f+=d,m="",s.groups[B])s.groups[B].hasOwnProperty(T)&&(c=r(s.groups[B][T],p))&&c[0]&&(m+=l(c[0]));f=(f=(f=f.split("{{GROUP_CLASS}}").join((u=B,"group-"+(u="object"==typeof SB?SB.util.encodeName(u):require(__dirname+"/../../lib/sharedUtil").util.encodeName(u))))).split("{{GROUP_TITLE}}").join(B)).split("{{SUB_DEVICE_LIST}}").join(m)}}else for(B in p)p.hasOwnProperty(B)&&(f+=l(p[B]));switch(_){case"Home":t=(t=t.split("{{DEVICE_STATE_HOME}}").join(" device-active")).split("{{HOME_STATUS}}").join(a("ACTIVE"));break;case"Away":t=(t=t.split("{{DEVICE_STATE_AWAY}}").join(" device-active")).split("{{AWAY_STATUS}}").join(a("ACTIVE"));break;case"Night":t=(t=t.split("{{DEVICE_STATE_NIGHT}}").join(" device-active")).split("{{NIGHT_STATUS}}").join(a("ACTIVE"))}}return(t=(t=(t=(t=(t=(t=t.split("{{DEVICE_STATE_HOME}}").join("")).split("{{DEVICE_STATE_AWAY}}").join("")).split("{{DEVICE_STATE_NIGHT}}").join("")).split("{{HOME_STATUS}}").join(a("INACTIVE"))).split("{{AWAY_STATUS}}").join(a("INACTIVE"))).split("{{NIGHT_STATUS}}").join(a("INACTIVE"))).replace("{{SMARTTHINGS_DYNAMIC}}",f)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.sports=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"sports"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"sports",n)}var a,l=o.image,p=o.league,c=o.game,u=0,E=0,S={},d={},B="",T="",f="",_="",m="",C="",A="",g="",I="";if(i&&s)for(u in s)if(s[u]&&s[u].games.length){for(S=s[u],A="",E=0;E<S.games.length;E+=1)d=S.games[E],B=r("TITLE").split("{{AWAY}}").join(d.away.title).split("{{HOME}}").join(d.home.title),f=d.away.winner?" winner":"",T=d.home.winner?" winner":"",_=d.away.winner?" ("+r("WINNER")+")":"",m=d.home.winner?" ("+r("WINNER")+")":"",I=g="",A=(A=(A=(A=(A=(A=(A=(A=(A=(A=(A=(A=(A+=c.split("{{GAME_LINK}}").join(d.url||"#")).split("{{GAME_TITLE}}").join(B)).split("{{GAME_AWAY_WINNER_CLASS}}").join(f)).split("{{GAME_AWAY_WINNER}}").join(_)).split("{{GAME_AWAY_TEAM}}").join(d.away.title)).split("{{GAME_AWAY_SCORE}}").join(d.away.score||"")).split("{{GAME_HOME_WINNER_CLASS}}").join(T)).split("{{GAME_HOME_WINNER}}").join(m)).split("{{GAME_HOME_TEAM}}").join(d.home.title)).split("{{GAME_HOME_SCORE}}").join(d.home.score||"")).split("{{GAME_TIME}}").join((a=d.time,"object"==typeof SB&&"object"==typeof SB.util?SB.util.displayTime(a,r):require(__dirname+"/../../lib/sharedUtil").util.displayTime(a,r)))).split("{{GAME_STATUS}}").join((d.status||"").toLowerCase())).split("{{GAME_STATE}}").join(r(d.status)),d.away.image&&(g=(g=l.split("{{TEAM_IMAGE}}").join(d.away.image)).split("{{TEAM_NAME}}").join(r("AWAY_TEAM_LOGO"))),d.home.image&&(I=(I=l.split("{{TEAM_IMAGE}}").join(d.home.image)).split("{{TEAM_NAME}}").join(r("HOME_TEAM_LOGO"))),A=(A=A.split("{{GAME_AWAY_IMAGE}}").join(g)).split("{{GAME_HOME_IMAGE}}").join(I);C=(C+=p.split("{{LEAGUE_NAME}}").join(S.title)).split("{{GAME_LIST}}").join(A)}return t.replace("{{SPORTS_DYNAMIC}}",C)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.tcl=function(e,t,i,s,o){var n=o.list,r=0,a="";if(s)for(r in s)s.hasOwnProperty(r)&&(a=(a=(a+=n.split("{{APP_ID}}").join(s[r].id)).split("{{APP_IMG}}").join(s[r].cache)).split("{{APP_NAME}}").join(s[r].name));return t.replace("{{TCL_DYNAMIC}}",a)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.traffic=function(e,t,i,s,o){var n=o.list,r=0,a="";if(s)for(r in s)s.hasOwnProperty(r)&&(a=(a+=n.split("{{CAM_IMG}}").join(s[r].image)).split("{{CAM_NAME}}").join(s[r].title));return t.replace("{{TRAFFIC_DYNAMIC}}",a)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.travis=function(e,t,i,s,o){var n=o.build,r="",a="",l="",p=0;if(i&&s)for(;p<s.length;p+=1)l=a="","created"===s[p].state||"started"===s[p].state?a="cogs":"ok"===s[p].status?a="check":"err"===s[p].status&&(a="times"),s[p].duration&&(l=" ("+s[p].duration+"s)"),r=(r=(r=(r=(r+=n.split("{{TRAVIS_URL}}").join(s[p].url)).split("{{TRAVIS_ICON}}").join(a)).split("{{TRAVIS_STATE}}").join(s[p].status)).split("{{TRAVIS_DURATION}}").join(l)).split("{{TRAVIS_DESCRIPTION}}").join(s[p].label);return t=t.replace("{{TRAVIS_DYNAMIC}}",r)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.twitter=function(e,t,i,s,o){var n=o.tweet,r="",a=0;if(i&&s)for(;a<s.length;a+=1)r=(r=(r+=n.split("{{TWEET_TEXT}}").join(s[a].text)).split("{{TWEET_URL}}").join(s[a].url)).split("{{TWEET_AUTHOR}}").join(s[a].author);return t=t.replace("{{TWITTER_DYNAMIC}}",r)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.weather=function(e,t,i,s,o,n){var r,a,l,p=o.forecast,c=0,u="";if(a=function(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"weather"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"weather",n)},l=function(e){return{"clear-day":"sun-o","clear-night":"moon-o",rain:"umbrella",snow:"snowflake-o",sleet:"snowflake-o",wind:"flag",fog:"fire",cloudy:"cloud","partly-cloudy-day":"cloud","partly-cloudy-night":"cloud",hail:"snowflake-o",thunderstorm:"bolt",tornado:"warning"}[e]||"question"},s&&s.code)for(t=(t=(t=(t=(t=t.replace("{{WEATHER_ICON}}",l(s.code))).replace("{{WEATHER_CURRENT}}",a("CURRENT")+": "+s.temp+"&deg; "+s.text)).replace("{{WEATHER_SUNRISE}}",s.sunrise)).replace("{{WEATHER_SUNSET}}",s.sunset)).replace("{{WEATHER_SUMMARY}}",s.text+".  "+s.hourly);c<s.forecast.days.length;c+=1)r=s.forecast.days[c],u=(u=(u=(u=(u+=p.split("{{WEATHER_ICON}}").join(l(r.code))).split("{{WEATHER_DAY}}").join(a(r.day)+":")).split("{{WEATHER_TEXT}}").join(r.text)).split("{{WEATHER_HIGH}}").join(r.high+"&deg;")).split("{{WEATHER_LOW}}").join(r.low+"&deg;");else t=(t=(t=t.replace("{{WEATHER_CURRENT}}",a("UNAVAILABLE"))).replace("{{WEATHER_SUNRISE}}","")).replace("{{WEATHER_SUNSET}}",""),"string"==typeof s&&(u=s);return t.replace("{{WEATHER_DYNAMIC}}",u)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.website=function(e,t,i,s){var o="";return s&&s.source&&(o=s.source),t.replace("{{WEBSITE_DYNAMIC}}",o)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.wemo=function(e,t,i,s,o,n){function r(e){return e="object"==typeof SB&&"object"==typeof SB.util?SB.util.translate(e,"wemo"):require(__dirname+"/../../lib/sharedUtil").util.translate(e,"wemo",n)}function a(e,t){var i={},s=0;for(s in t)if(t[s].label===e){i=t[s];break}return i}function l(e){var t="";return T&&(T+="device-active"),t=(t=(t=u.split("{{SUB_DEVICE_ID}}").join(e.label.split(" ").join("+"))).split("{{SUB_DEVICE_NAME}}").join(e.label)).split("{{SUB_DEVICE_CLASS}}").join(e.className||"fa-lightbulb-o"),t="on"===e.state?(t=t.split("{{SUB_DEVICE_STATE}}").join(" device-active")).split("{{SUB_DEVICE_STATUS}}").join(r("ACTIVE")):"off"===e.state?(t=t.split("{{SUB_DEVICE_STATE}}").join("")).split("{{SUB_DEVICE_STATUS}}").join(r("INACTIVE")):(t=t.split("{{SUB_DEVICE_STATE}}").join(" device-off")).split("{{SUB_DEVICE_STATUS}}").join(r("INACTIVE"))}var p,c,u=o.switch,E=o.group,S=0,d=0,B="",T="",f="";if(s&&s.devices){if(s.groups){for(S in s.groups)if(s.groups.hasOwnProperty(S)){for(d in B+=E,f="",s.groups[S])s.groups[S].hasOwnProperty(d)&&(p=a(s.groups[S][d],s.devices))&&(f+=l(p));B=(B=(B=B.split("{{GROUP_CLASS}}").join((c=S,c="object"==typeof SB?SB.util.encodeName(c):require(__dirname+"/../../lib/sharedUtil").util.encodeName(c)))).split("{{GROUP_TITLE}}").join(S)).split("{{SUB_DEVICE_LIST}}").join(f)}}else for(S in s.devices)s.devices.hasOwnProperty(S)&&(B+=l(s.devices[S]));B=B&&B.replace("{{SUB_DEVICE_CLASS}}"," text-device-status")}return t.replace("{{WEMO_DYNAMIC}}",B)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(e){"use strict";e.xbmc=function(e,t,i,s,o){var n=o.current,r="";return s&&s.current&&(r=n.split("{{DEVICE_CURRENT}}").join(s.current)),t.replace("{{XBMC_DYNAMIC}}",r)}}("undefined"==typeof exports?this.SB.spec.parsers:exports),function(n){"use strict";n.util={version:20190427,replaceAll:function(e,t,i){var s=e;return"string"==typeof e&&(s=e.replace(new RegExp(t,"g"),i)),s},stripTags:function(e){return"string"==typeof e?e.replace(/(<([^>]+)>)/gi,""):e},stripControl:function(e){return"string"==typeof e?e.replace(new RegExp("[\0-]+","g"),""):e},sanitize:function(e){return n.util.stripTags(n.util.stripControl(e))},encodeName:function(e){return e&&"string"==typeof e&&(e=e.replace(/[\s!@#$%^&*()"'\\<>,;.:/+]/g,"_").toLowerCase()),e},translate:function(e,t,i){return e&&"string"==typeof e?(e=e.toUpperCase(),("object"==typeof SB?(i=document.documentElement.getAttribute("lang"),function(e,t){var i=SB.getByClass(t,SB.getByTag("main")[0],"section")[0];return e=e.replace("{{i18n_","").replace("}}",""),i.dataset&&i.dataset["string"+e.charAt(0)+e.substr(1).toLowerCase()]?e=i.dataset["string"+e.charAt(0)+e.substr(1).toLowerCase()]:SB.spec.strings[e]&&(e=SB.spec.strings[e]),e}):require(__dirname+"/translate").translate)("{{i18n_"+e+"}}",t,i)):e},arrayList:function(e,t,i){for(var s="",o=0;o<e.length;o+=1)o&&(o===e.length-1?s=s+" "+n.util.translate("AND",t,i)+" ":s+=", "),s+=e[o];return s},displayRelativeTime:function(e){var t,i={day:86400,hour:3600,minute:60,second:1},s={day:"00",hour:"00",minute:"00",second:"00"};for(t in i)i[t]<=e&&(s[t]=Math.floor(e/i[t]),s[t]<10&&(s[t]="0"+s[t]),e-=s[t]*i[t]);return s.day+" "+s.hour+":"+s.minute+":"+s.second},displayTime:function(e,t,i,s){var o=s||new Date(e),n=o.getDate(),r=o.getDay(),a=o.getHours(),l=o.getMinutes(),p=t("am"),c="";switch(12<a&&(a-=12,p=t("pm")),a=0===a?12:a,l<10&&(l="0"+l),r=t({0:"sun",1:"mon",2:"tue",3:"wed",4:"thur",5:"fri",6:"sat"}[r]),i){case"long":c=r+" "+n+" @ "+a+":"+l+p;break;default:c=r+" @ "+a+":"+l+p}return c},fToC:function(e){return Math.round((e-32)/1.8*10)/10},cToF:function(e){return Math.round(10*(1.8*e+32))/10},safeGet:function(e,t){if(e&&e.constructor===Object&&t&&t.constructor===Array){for(;t.length&&null!=(e=e[t.shift()]););return e}},safeSet:function(e,t,i,s){var o,n;if(!((s=s||!1)||e&&e.constructor===Object))return!1;if(!t||t.constructor!==Array)return!1;if(o=t.shift(),t.length){if((!e[o]||e[o].constructor!==Object&&s)&&(e[o]={}),!(n=this.safeSet(e[o],t,i,s))&&!s)return!1;e[o]=n}else e[o]&&!s||(e[o]=i);return e}}}("undefined"==typeof exports?this.SB:exports);